!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t="undefined"!=typeof globalThis?globalThis:t||self).jsSHA=r()}(this,function(){"use strict";var n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])})(t,r)},v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="ARRAYBUFFER not supported by this environment",e="UINT8ARRAY not supported by this environment";function o(t,r,n,e){for(var o,i,s=r||[0],u=(n=n||0)>>>3,h=-1===e?3:0,a=0;a<t.length;a+=1)o=(i=a+u)>>>2,s.length<=o&&s.push(0),s[o]|=t[a]<<8*(h+e*(i%4));return{value:s,binLen:8*t.length+n}}function i(t,A,g){switch(A){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(t){case"HEX":return function(t,r,n){var e,o,i,s=t,t=r,r=n,u=g;if(0!=s.length%2)throw new Error("String of HEX type must be in byte increments");for(var h=t||[0],a=(r=r||0)>>>3,f=-1===u?3:0,c=0;c<s.length;c+=2){if(e=parseInt(s.substr(c,2),16),isNaN(e))throw new Error("String of HEX type contains invalid characters");for(o=(i=(c>>>1)+a)>>>2;h.length<=o;)h.push(0);h[o]|=e<<8*(f+u*(i%4))}return{value:h,binLen:4*s.length+r}};case"TEXT":return function(t,r,n){var e,o,i,s,u,h,a,f,c=t,t=A,p=0,l=g,w=0,d=r||[0],v=(p=n||0)>>>3;if("UTF8"===t)for(a=-1===l?3:0,i=0;i<c.length;i+=1)for(o=[],(e=c.charCodeAt(i))<128?o.push(e):e<2048?(o.push(192|e>>>6),o.push(128|63&e)):e<55296||57344<=e?o.push(224|e>>>12,128|e>>>6&63,128|63&e):(e=65536+((1023&e)<<10|1023&c.charCodeAt(i+=1)),o.push(240|e>>>18,128|e>>>12&63,128|e>>>6&63,128|63&e)),s=0;s<o.length;s+=1){for(u=(h=w+v)>>>2;d.length<=u;)d.push(0);d[u]|=o[s]<<8*(a+l*(h%4)),w+=1}else for(a=-1===l?2:0,f="UTF16LE"===t&&1!==l||"UTF16LE"!==t&&1===l,i=0;i<c.length;i+=1){for(e=c.charCodeAt(i),!0==f&&(e=(s=255&e)<<8|e>>>8),u=(h=w+v)>>>2;d.length<=u;)d.push(0);d[u]|=e<<8*(a+l*(h%4)),w+=2}return{value:d,binLen:8*w+p}};case"B64":return function(t,r,n){var e,o,i,s,u,h,a=t,t=0,f=g,c=0,p=r||[0],l=(t=n||0)>>>3,w=-1===f?3:0,r=a.indexOf("=");if(-1===a.search(/^[a-zA-Z0-9=+/]+$/))throw new Error("Invalid character in base-64 string");if(a=a.replace(/=/g,""),-1!==r&&r<a.length)throw new Error("Invalid '=' found in base-64 string");for(e=0;e<a.length;e+=4){for(s=a.substr(e,4),o=i=0;o<s.length;o+=1)i|=v.indexOf(s.charAt(o))<<18-6*o;for(o=0;o<s.length-1;o+=1){for(u=(h=c+l)>>>2;p.length<=u;)p.push(0);p[u]|=(i>>>16-8*o&255)<<8*(w+f*(h%4)),c+=1}}return{value:p,binLen:8*c+t}};case"BYTES":return function(t,r,n){for(var e,o,i,s=t,t=0,u=g,h=r||[0],a=(t=n||0)>>>3,f=-1===u?3:0,c=0;c<s.length;c+=1)e=s.charCodeAt(c),o=(i=c+a)>>>2,h.length<=o&&h.push(0),h[o]|=e<<8*(f+u*(i%4));return{value:h,binLen:8*s.length+t}};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(t){throw new Error(r)}return function(t,r,n){return r=r,n=n,e=g,o(new Uint8Array(t),r,n,e);var e};case"UINT8ARRAY":try{new Uint8Array(0)}catch(t){throw new Error(e)}return function(t,r,n){return o(t,r,n,g)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function s(t,l,w,d){switch(t){case"HEX":return function(t){for(var r,n=t,e=w,t=d,o="0123456789abcdef",i="",s=l/8,u=-1===e?3:0,h=0;h<s;h+=1)r=n[h>>>2]>>>8*(u+e*(h%4)),i+=o.charAt(r>>>4&15)+o.charAt(15&r);return t.outputUpper?i.toUpperCase():i};case"B64":return function(t){for(var r,n,e,o,i=t,s=l,u=w,h=d,a="",f=s/8,c=-1===u?3:0,p=0;p<f;p+=3)for(e=p+1<f?i[p+1>>>2]:0,o=p+2<f?i[p+2>>>2]:0,n=(i[p>>>2]>>>8*(c+u*(p%4))&255)<<16|(e>>>8*(c+u*((p+1)%4))&255)<<8|o>>>8*(c+u*((p+2)%4))&255,r=0;r<4;r+=1)a+=8*p+6*r<=s?v.charAt(n>>>6*(3-r)&63):h.b64Pad;return a};case"BYTES":return function(t){for(var r,n=t,e=w,o="",i=l/8,s=-1===e?3:0,u=0;u<i;u+=1)r=n[u>>>2]>>>8*(s+e*(u%4))&255,o+=String.fromCharCode(r);return o};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(t){throw new Error(r)}return function(t){for(var r=t,n=w,e=l/8,t=new ArrayBuffer(e),o=new Uint8Array(t),i=-1===n?3:0,s=0;s<e;s+=1)o[s]=r[s>>>2]>>>8*(i+n*(s%4))&255;return t};case"UINT8ARRAY":try{new Uint8Array(0)}catch(t){throw new Error(e)}return function(t){for(var r=t,n=w,e=l/8,o=-1===n?3:0,i=new Uint8Array(e),s=0;s<e;s+=1)i[s]=r[s>>>2]>>>8*(o+n*(s%4))&255;return i};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function u(t){var r={outputUpper:!1,b64Pad:"=",outputLen:-1},t=t||{},n="Output length must be a multiple of 8";if(r.outputUpper=t.outputUpper||!1,t.b64Pad&&(r.b64Pad=t.b64Pad),t.outputLen){if(t.outputLen%8!=0)throw new Error(n);r.outputLen=t.outputLen}else if(t.shakeLen){if(t.shakeLen%8!=0)throw new Error(n);r.outputLen=t.shakeLen}if("boolean"!=typeof r.outputUpper)throw new Error("Invalid outputUpper formatting option");if("string"!=typeof r.b64Pad)throw new Error("Invalid b64Pad formatting option");return r}function f(t,r){return t<<r|t>>>32-r}function c(t,r){var n=(65535&t)+(65535&r);return(65535&(t>>>16)+(r>>>16)+(n>>>16))<<16|65535&n}function p(t,r,n,e,o){var i=(65535&t)+(65535&r)+(65535&n)+(65535&e)+(65535&o);return(65535&(t>>>16)+(r>>>16)+(n>>>16)+(e>>>16)+(o>>>16)+(i>>>16))<<16|65535&i}function h(t){return[1732584193,4023233417,2562383102,271733878,3285377520]}function a(t,r){for(var n,e=[],o=r[0],i=r[1],s=r[2],u=r[3],h=r[4],a=0;a<80;a+=1)e[a]=a<16?t[a]:f(e[a-3]^e[a-8]^e[a-14]^e[a-16],1),n=a<20?p(f(o,5),i&s^~i&u,h,1518500249,e[a]):a<40?p(f(o,5),i^s^u,h,1859775393,e[a]):a<60?p(f(o,5),i&s^i&u^s&u,h,2400959708,e[a]):p(f(o,5),i^s^u,h,3395469782,e[a]),h=u,u=s,s=f(i,30),i=o,o=n;return r[0]=c(o,r[0]),r[1]=c(i,r[1]),r[2]=c(s,r[2]),r[3]=c(u,r[3]),r[4]=c(h,r[4]),r}function l(t,r,n,e){for(var o,i=15+(r+65>>>9<<4),n=r+n;t.length<=i;)t.push(0);for(t[r>>>5]|=128<<24-r%32,t[i]=4294967295&n,t[i-1]=n/4294967296|0,o=0;o<t.length;o+=16)e=a(t.slice(o,o+16),e);return e}E.prototype.update=function(t){for(var r=0,n=this.m>>>5,t=this.h(t,this.S,this.C),e=t.binLen,o=t.value,i=e>>>5,s=0;s<i;s+=n)r+this.m<=e&&(this.R=this.p(o.slice(s,s+n),this.R),r+=this.m);return this.H+=r,this.S=o.slice(r>>>5),this.C=e%this.m,this.I=!0,this},E.prototype.getHash=function(t,r){var n,e,o=this.F,r=u(r);if(this.g){if(-1===r.outputLen)throw new Error("Output length must be specified in options");o=r.outputLen}t=s(t,o,this.u,r);if(this.L&&this.i)return t(this.i(r));for(e=this.T(this.S.slice(),this.C,this.H,this.A(this.R),o),n=1;n<this.numRounds;n+=1)this.g&&o%32!=0&&(e[e.length-1]&=16777215>>>24-o%32),e=this.T(e,o,0,this.U(this.Y),o);return t(e)},E.prototype.setHMACKey=function(t,r,n){if(!this.t)throw new Error("Variant does not support HMAC");if(this.I)throw new Error("Cannot set MAC key after calling update");r=i(r,(n||{}).encoding||"UTF8",this.u);this.B(r(t))},E.prototype.B=function(t){var r,n=this.m>>>3,e=n/4-1;if(1!==this.numRounds)throw new Error("Cannot set numRounds with MAC");if(this.L)throw new Error("MAC key already set");for(n<t.binLen/8&&(t.value=this.T(t.value,t.binLen,0,this.U(this.Y),this.F));t.value.length<=e;)t.value.push(0);for(r=0;r<=e;r+=1)this.N[r]=909522486^t.value[r],this.X[r]=1549556828^t.value[r];this.R=this.p(this.N,this.R),this.H=this.m,this.L=!0},E.prototype.getHMAC=function(t,r){r=u(r);return s(t,this.F,this.u,r)(this.o())},E.prototype.o=function(){if(!this.L)throw new Error("Cannot call getHMAC without first setting MAC key");var t=this.T(this.S.slice(),this.C,this.H,this.A(this.R),this.F),r=this.p(this.X,this.U(this.Y));return this.T(t,this.F,this.m,r,this.F)};var w=E;function t(t,r,n){var e=this;if("SHA-1"!==t)throw new Error("Chosen SHA variant is not supported");var o=n||{};return(e=w.call(this,t,r,n)||this).t=!0,e.i=e.o,e.u=-1,e.h=i(e.v,e.l,e.u),e.p=a,e.A=function(t){return t.slice()},e.U=h,e.T=l,e.R=[1732584193,4023233417,2562383102,271733878,3285377520],e.m=512,e.F=160,e.g=!1,o.hmacKey&&e.B(function(t,r){var n="hmacKey must include a value and format";if(!t)throw new Error(n);if(void 0!==t.value&&t.format)return i(t.format,t.encoding||"UTF8",r)(t.value);throw new Error(n)}(o.hmacKey,e.u)),e}var d=t,A=w;if("function"!=typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function g(){this.constructor=d}return n(d,A),d.prototype=null===A?Object.create(A):(g.prototype=A.prototype,new g),t;function E(t,r,n){n=n||{};if(this.v=r,this.l=n.encoding||"UTF8",this.numRounds=n.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||this.numRounds<1)throw new Error("numRounds must a integer >= 1");this.Y=t,this.S=[],this.C=0,this.I=!1,this.H=0,this.L=!1,this.N=[],this.X=[]}});